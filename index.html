<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>adam's homepage</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-pos-y: 0%;
        }

        body {
            font-family: "Comic Sans MS", "Comic Sans", "Patrick Hand", cursive;
            color: blue;
            font-size: 1.5em;
            text-align: left;
            padding-left: 20px;
            margin: 0;
            background: none;
        }

        /* ---------- PARALLAX BACKGROUND ---------- */

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            z-index: -1;
            background-image: url('archway.jpg');
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center var(--bg-pos-y);
        }

        /* ---------- TITLE ---------- */

        h1 {
            font-size: 3em;
            text-transform: lowercase;
            color: #fff3a6;
            text-shadow:
                2px 2px 4px rgba(255, 90, 95, 0.9),
                4px 4px 8px rgba(255, 90, 95, 0.65);
        }

        a:link {
            color: #39FF14;
            font-size: 1.5em;
            text-decoration: none;
        }

        a:visited,
        a:active {
            color: #39FF14;
        }

        /* ---------- SEARCH BOX ---------- */

        .search-wrap {
            margin-top: 10px;
            margin-bottom: 6px;
        }

        .search-wrap input[type="text"] {
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid rgba(0,0,0,0.2);
            font-family: inherit;
            font-size: 1em;
            min-width: 320px;
            background: rgba(255,255,255,0.8);
        }

        .search-wrap button {
            padding: 8px 10px;
            border-radius: 10px;
            border: 1px solid rgba(0,0,0,0.2);
            font-family: inherit;
            font-size: 1em;
            color: #466fd4;
            background: rgba(255,255,255,0.8);
            cursor: pointer;
        }

        /* ---------- SUBHEADINGS ---------- */

        .subhead {
            color: #d7b3e6;
            font-weight: 800;
            letter-spacing: 0.14em;
            font-size: 1.15em;
            display: inline-block;
            margin-top: 18px;
            margin-bottom: 6px;
            text-shadow:
                2px 0   0 rgba(255,90,165,0.75),
               -2px 0   0 rgba(255,90,165,0.75),
                0   2px 0 rgba(255,90,165,0.75),
                0  -2px 0 rgba(255,90,165,0.75),
                2px 2px 0 rgba(255,90,165,0.75),
               -2px 2px 0 rgba(255,90,165,0.75),
                2px -2px 0 rgba(255,90,165,0.75),
               -2px -2px 0 rgba(255,90,165,0.75);
        }

        /* ---------- ADVANCED SEARCH ---------- */

        .advanced-search {
            font-style: italic;
            text-shadow:
                0 0 6px rgba(140, 255, 170, 0.65),
                0 0 14px rgba(140, 255, 170, 0.45);
        }

        /* ---------- BOTTOM GIF ---------- */

        .bottom-gif {
            width: 108px;
            height: auto;
            display: block;
            margin-top: 12px;
        }

        /* ---------- (tiny) safety message ---------- */
        .sitebook-warn {
            color: #fff3a6;
            font-size: 0.95em;
            max-width: 38em;
            text-shadow:
              2px 2px 4px rgba(255, 90, 95, 0.65);
        }
    </style>
</head>

<body>

<h1>hello :)</h1>

<!-- Homepage links will be rendered here from sites.js (window.SITEBOOK) -->
<div id="homeLinks"></div>

<br><br>

<span class="subhead">s e a r c h</span><br>

<div class="search-wrap">
    <input id="quickTerm" type="text">
    <button id="quickGo">search</button>
</div>

<a href="site-search.html" class="advanced-search">advanced search</a>

<script src="sites.js"></script>
<script>
    function buildSiteClause(domains) {
        return "(" + domains.map(d => "site:" + d).join(" OR ") + ")";
    }

    function getQuickSearchDomains() {
        const sb = window.SITEBOOK;
        if (!sb || !sb.sites) return [];

        const domains = [];
        for (const [id, site] of Object.entries(sb.sites)) {
            if (site && site.inQuickSearch && site.domain) domains.push(site.domain);
        }
        // de-dup, stable
        return Array.from(new Set(domains));
    }

    function runQuickSearch() {
        const term = (document.getElementById("quickTerm").value || "").trim();
        if (!term) return;

        const domains = getQuickSearchDomains();
        if (!domains.length) {
            window.open("https://www.google.com/search?q=" + encodeURIComponent(term), "_blank");
            return;
        }

        const q = `${term} ${buildSiteClause(domains)}`.trim();
        window.open("https://www.google.com/search?q=" + encodeURIComponent(q), "_blank");
    }

    function renderHomepageLinks() {
        const host = document.getElementById("homeLinks");
        host.innerHTML = "";

        const sb = window.SITEBOOK;
        if (!sb || !Array.isArray(sb.homeSections) || !sb.sites) {
            const warn = document.createElement("div");
            warn.className = "sitebook-warn";
            warn.textContent = "Site list failed to load (sites.js / window.SITEBOOK missing).";
            host.appendChild(warn);
            return;
        }

        for (const section of sb.homeSections) {
            const label = (section && typeof section.label === "string") ? section.label : "";
            const items = (section && Array.isArray(section.items)) ? section.items : [];

            // Spacer between sections (but not before the first output)
            if (host.childNodes.length) host.appendChild(document.createElement("br"));

            // Heading (skip for "(top)")
            if (label && label !== "(top)") {
                const head = document.createElement("span");
                head.className = "subhead";
                head.textContent = label;
                host.appendChild(head);
                host.appendChild(document.createElement("br"));
            }

            for (const id of items) {
                const site = sb.sites[id];
                if (!site) continue;

                // Respect the "onHomepage" toggle (so you can hide without removing from list)
                if (site.onHomepage === false) continue;

                const a = document.createElement("a");
                a.href = site.url || "#";
                a.textContent = site.label || id;
                host.appendChild(a);
                host.appendChild(document.createElement("br"));
            }
        }
    }

    document.getElementById("quickGo").addEventListener("click", runQuickSearch);
    document.getElementById("quickTerm").addEventListener("keydown", (e) => {
        if (e.key === "Enter") runQuickSearch();
    });

    // Parallax: scroll background down to a max percent of the image
    const MAX_BG_PERCENT = 90;
    const SPEED = 0.55;

    function updateParallax() {
        const doc = document.documentElement;
        const scrollTop = window.scrollY || doc.scrollTop || 0;
        const maxScroll = Math.max(1, doc.scrollHeight - window.innerHeight);
        const progress = Math.min(1, scrollTop / maxScroll);
        const pos = Math.min(MAX_BG_PERCENT, progress * MAX_BG_PERCENT * SPEED);
        document.documentElement.style.setProperty("--bg-pos-y", pos + "%");
    }

    // Render once sites.js has executed
    renderHomepageLinks();

    window.addEventListener("scroll", updateParallax, { passive: true });
    window.addEventListener("resize", updateParallax);
    updateParallax();
</script>

<br>
<img src="flowergif.gif" alt="flower" class="bottom-gif">

</body>
</html>
